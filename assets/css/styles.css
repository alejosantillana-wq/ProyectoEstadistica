@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

:root{
    --c0: #072b32;
    --c1: #2d7f86;
    --c2: #4aa0a6;
    --c3: #86c1ba;
    --c4: #cfe9e5;
    --muted: #6b7c7d;
    --bg: #f7fbfb;
    --card: #ffffff;
    --glass: rgba(255,255,255,0.85);
}

body{
    font-family: 'Poppins', Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,var(--bg) 0%, #f0f9f8 60%);
    color: var(--c0);
    -webkit-font-smoothing:antialiased;
}

h1,h2,h3,h4,h5{ color: var(--c0) }
.card{ border-radius: .6rem }
footer{ border-top: 1px solid rgba(20,40,40,0.04); background:transparent }
#conteo-interpretacion{ white-space: pre-line; color:var(--muted) }

/* Responsivo */
@media (max-width: 768px){
    #conteoChart{ height: 220px !important }
}

/* Sidebar */
.app-shell{ display:flex; min-height:100vh; }
.sidebar{ width:84px; background: linear-gradient(180deg, var(--c0), var(--c1)); color: #fff; box-shadow: 0 6px 18px rgba(10,30,30,0.08); position:fixed; left:16px; top:16px; bottom:auto; height:calc(100vh - 32px); border-radius:18px; padding:12px; display:flex; flex-direction:column; align-items:flex-start; gap:12px; z-index:1000; overflow:visible }
.sidebar .brand{ width:56px; height:56px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-weight:700; color:white; font-size:18px; padding-left:0 }
/* brand centering */
.sidebar .brand a{ display:block; width:100%; text-align:center }
.sidebar .brand img{ margin:0 auto; display:block }
.app-logo{ width:44px; height:44px; display:block; max-width:44px; max-height:44px; object-fit:contain }
.sidebar-nav{ display:flex; flex-direction:column; gap:8px; margin-top:6px; }
.side-link{ width:56px; height:56px; border-radius:12px; display:flex; align-items:center; justify-content:center; color:rgba(255,255,255,0.9); text-decoration:none; transition: transform .18s ease, box-shadow .18s ease, background .18s ease; }
.side-link:hover{ transform: translateY(-4px); box-shadow: 0 8px 24px rgba(45,125,125,0.08); background: rgba(255,255,255,0.04); }
.side-link.active{ background: linear-gradient(135deg, var(--c2), var(--c1)); color:white; box-shadow: 0 10px 30px rgba(45,125,125,0.12); }
.sidebar-footer{ margin-top:auto; font-size:11px; color:rgba(255,255,255,0.85); }
.sidebar-footer:empty{ display:none; }
.main-content{ margin-left:140px; padding:36px; flex:1 }

/* Cards */
.card{ background: var(--card); border: 1px solid rgba(12,38,36,0.04); color: var(--c0); box-shadow: 0 6px 18px rgba(17,34,34,0.04) }
.card h5{ color:var(--c0) }

/* Utilities */
.list-group-item{ background:transparent; border-radius:12px; color:var(--c0) }
.list-group-item:hover{ background: linear-gradient(90deg, rgba(74,160,166,0.06), rgba(134,193,186,0.04)); }

@media (max-width: 900px){
    .sidebar{ position:fixed; left:12px; top:12px; bottom:auto; width:68px; height:auto; flex-direction:row; border-radius:12px; padding:8px }
    .main-content{ margin-left:0; margin-top:72px; padding:16px }
}

/* Layout */
.main-content .container{ max-width:1100px; margin:0 auto; }

@media (min-width:901px){
    /* Desktop padding and sidebar */
    .main-content{ margin-left:140px; padding:48px 40px; }
    /* Sidebar desktop */
    .sidebar{ align-items:flex-start; padding-left:12px; width:110px; border-radius:14px }
    .sidebar .brand{ margin-bottom:12px; justify-content:center; align-self:center }
    .sidebar-nav{ display:flex; flex-direction:column; gap:10px; align-items:flex-start; width:100% }
    /* collapsed desktop: icons; open: full links */
    .side-link{ width:56px; justify-content:center; padding:0 6px; border-radius:10px }
    .side-link i{ margin-right:10px; }
    .sidebar.open .side-link{ width:100%; justify-content:flex-start; padding:10px 12px; }
    /* Labels hidden when collapsed */
        .side-label{ display:inline-block; color:var(--card); opacity:0; transform:translateX(-6px); white-space:nowrap; max-width:none; pointer-events:none; transition:opacity .22s ease, transform .22s ease; text-align:left }
    /* Open width */
    .sidebar.open { width: 300px; padding:16px; }

    /* Transitions */
    .sidebar{ transition: width .22s ease, padding .22s ease; }
    .sidebar:not(.open) .sidebar-nav{ align-items:center; }
    /* Labels left-aligned when open */
    .sidebar.open .side-label{ opacity:1; transform:none; pointer-events:auto; text-align:left; padding-left:12px; width: calc(100% - 72px); }

    .sidebar .sidebar-footer:empty{ display:none; }
}

@media (max-width:900px){
    /* Mobile: top bar */
    .sidebar{ position:fixed; left:0; right:0; top:0; bottom:auto; width:100%; height:64px; border-radius:0; padding:8px 12px; display:flex; align-items:center; justify-content:space-between; box-shadow: 0 6px 18px rgba(10,30,30,0.06); }
    .sidebar .brand{ margin-left:8px; background:transparent; color:var(--c0); }
    .sidebar-nav{ flex-direction:row; gap:6px; margin-top:0; }
    .side-link{ width:48px; height:48px; border-radius:10px; display:flex; align-items:center; justify-content:center; }
    .side-link .side-label{ display:none; }
    .main-content{ margin-left:0; margin-top:84px; padding:18px; }
    .main-content .container{ padding:0 8px; }
    /* Chart responsive */
    canvas{ width:100% !important; height:auto !important; }
}

/* Mobile overlay panel */
@media (max-width:900px){
    /* Nav hidden by default on small screens */
    .sidebar{ flex-direction:row; align-items:center; padding:8px 12px; height:64px; }
    .sidebar .sidebar-nav{ display:none; }
    .sidebar .sidebar-footer{ display:none; }

    /* When opened, show an overlay vertical panel aligned to left */
    .sidebar.open{
        position:fixed;
        left:12px;
        top:12px;
        width:240px;
        height:auto;
        bottom:12px;
        flex-direction:column;
        padding:16px;
        border-radius:14px;
        background: linear-gradient(180deg, var(--c0), var(--c1));
        z-index:1200;
    }
    .sidebar.open .sidebar-nav{ display:flex; flex-direction:column; gap:12px; margin-top:8px; }
    .sidebar.open .side-link{ width:100%; justify-content:flex-start; padding:10px 12px; border-radius:10px }
    .sidebar.open .side-label{ display:inline-block; margin-left:10px; color:var(--card); max-width:140px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    /* Do not shift main-content on mobile open; use overlay */
    .sidebar.open ~ .main-content, .sidebar.open + .main-content{ margin-left:0; margin-top: calc(84px); }
}


/* --- Hamburger button (mobile) --- */
.hamburger-btn{ display:none; background:transparent; border:0; color:var(--card); width:44px; height:44px; border-radius:8px; align-items:center; justify-content:center; }
.hamburger-btn svg{ width:22px; height:22px; display:block }

@media (max-width:900px){
    .hamburger-btn{ display:flex; margin-left:6px }
}

.sidebar.open{ width:300px; }
.sidebar.open .brand{ width:64px; height:64px; margin:0 auto }
.sidebar.open .side-label{ display:inline-block; color:var(--card); opacity:1; transform: translateX(0); max-width:120px; overflow:hidden; text-overflow:ellipsis; }
.sidebar.open .side-link{ justify-content:flex-start; padding-left:18px }
    .sidebar.open ~ .main-content, .sidebar.open + .main-content{ margin-left:320px }

/* Ensure labels are vertically centered next to icons */
.side-label{ line-height:1; vertical-align:middle }


/* Prevent very wide content: keep everything comfortable on large screens */
@media (min-width:1400px){
    .main-content .container{ max-width:1200px }
}

/* Ensure cards & forms take full width on small screens */
@media (max-width:768px){
    .card, .card .card-body{ width:100%; }
    .row > .col-lg-6{ flex: 0 0 100%; max-width:100%; }
}

/* Small accessibility tweaks */
.side-link:focus{ outline: 2px solid rgba(74,160,166,0.16); outline-offset: 2px }

/* --- Smooth interactions & sidebar expansion --- */
/* Transitions for layout changes to make expansion smooth */
.sidebar{ transition: width .28s cubic-bezier(.2,.9,.2,1), box-shadow .2s ease, transform .2s ease; }
.main-content{ transition: margin-left .28s cubic-bezier(.2,.9,.2,1), padding .2s ease; }

/* Expand sidebar on hover for desktop to reveal labels/tooltips */
@media (min-width: 901px){
    .sidebar:hover{ width:300px; }
    .sidebar:hover .brand{ width:64px; height:64px; }
    .sidebar .app-logo{ transition: transform .28s ease; }
    .sidebar:hover .app-logo{ transform: scale(1.05); }

        /* show inline labels (accessible) next to icons when the sidebar is expanded */
    .side-link{ display:flex; align-items:center; gap:12px; padding:0 12px; }
        .side-label{ display:none; font-size:13px; color:var(--card); background: transparent; padding:0; white-space:nowrap; transform: translateX(-6px); opacity:0; transition: opacity .18s ease, transform .18s ease; }
    .sidebar:hover .side-label{ display:inline-block; color: var(--card); opacity:1; transform: translateX(0); }
    .sidebar:hover .side-link{ width:100%; }

/* Stronger layout rules to align icons left and labels right when sidebar is expanded */
/* When expanded (hover or .open) show icon then label; label right-aligned */
.sidebar.open .side-link, .sidebar:hover .side-link{ display:flex; align-items:center; justify-content:flex-start; gap:12px; }
.sidebar.open .side-link i, .sidebar:hover .side-link i{ width:40px; min-width:40px; display:flex; align-items:center; justify-content:center; font-size:18px }
.sidebar.open .side-link .side-label, .sidebar:hover .side-link .side-label{ flex:1; text-align:left; padding-left:18px }

/* When collapsed, keep only the icon centered */
.sidebar:not(.open) .side-link{ justify-content:center }

        /* slight connector dot for visual continuity (decorative) */
        .side-link .connector{ display:none; }

        /* move main content smoothly so it doesn't jump */
    .sidebar:hover ~ .main-content, .sidebar:hover + .main-content{ margin-left:320px; }
}

/* Card hover lift and gentle entrance animation */
.card{ transition: transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s ease, opacity .28s ease; transform-origin: center; }
.card:hover{ transform: translateY(-8px); box-shadow: 0 20px 40px rgba(12,38,36,0.08); }

@keyframes fadeUp { from{ opacity:0; transform: translateY(8px) } to{ opacity:1; transform: translateY(0) } }
.card{ animation: fadeUp .42s ease both; }

/* Buttons: smoother hover/active states */
.btn{ transition: transform .14s ease, box-shadow .14s ease, background .18s ease; }
.btn:active{ transform: translateY(1px) }

/* Active link subtle animated gradient */
.side-link.active{ background-size:200% 200%; transition: background-position .8s ease; }
.side-link.active:hover{ background-position: right center; }

/* Reduce sudden layout shifts on small screens */
@media (max-width:900px){
    .sidebar{ transition:none }
    .main-content{ margin-top:84px }
}

/* Answer / explanation box used by calculators */
.answer-box{ background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.95)); border:1px solid rgba(10,30,30,0.04); padding:12px; border-radius:8px; color:var(--c0); font-size:0.95rem; line-height:1.4; max-height:240px; overflow:auto }
.answer-box strong{ color:var(--c0) }

/* Home card microstyles */
.home-card{ border-radius:16px; padding:28px; box-shadow: 0 12px 32px rgba(12,38,36,0.06); background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,250,0.95)); }
.home-logo{ width:120px; height:120px; object-fit:contain; display:block; margin:0 auto; }
.home-title{ margin-top:6px; margin-bottom:6px; font-weight:700 }
.home-card .list-group{ margin-top:14px }
.home-card .list-group .list-group-item{ border-radius:10px; padding:12px 14px }

@media (max-width:576px){
    .home-logo{ width:92px; height:92px }
    .home-card{ padding:18px }
}

/* Bayes tree container: allow horizontal scroll and responsive svg scaling */
#bayes-tree{ overflow:auto; padding:6px 2px; }
#bayes-tree svg{ max-width:100%; height:auto; display:block; }

/* Small formatting for the numeric summary under the tree */
.bayes-tree-summary{ font-size:0.9rem; color:var(--muted); margin-top:6px }

